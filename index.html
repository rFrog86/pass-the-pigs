<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pass the Pigs</title>
  <style>
    body {
      font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
      padding: 20px;
      background-color: #f8f4e8;
      max-width: 800px;
      margin: 0 auto;
      color: #333;
    }
    h1 {
      color: #e74c3c;
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    h2, h3 {
      color: #2c3e50;
      border-bottom: 2px solid #e74c3c;
      padding-bottom: 5px;
    }
    #setup, #game, #winScreen {
      background-color: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }
    .button {
      padding: 12px 20px;
      margin: 8px 0;
      min-width: 220px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: block;
      font-size: 1em;
      transition: all 0.3s;
      text-align: center;
    }
    .button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .special {
      background-color: #e74c3c;
      font-weight: bold;
    }
    .special:hover {
      background-color: #c0392b;
    }
    .eliminated {
      text-decoration: line-through;
      color: #95a5a6;
    }
    input[type="number"], input[type="text"] {
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
      margin: 5px 0;
    }
    #playerInputs input {
      width: 200px;
    }
    #roundScore {
      font-size: 1.2em;
      font-weight: bold;
      color: #27ae60;
      background-color: #eafaf1;
      padding: 10px;
      border-radius: 5px;
      display: inline-block;
    }
    #scoreBoard {
      list-style-type: none;
      padding: 0;
    }
    #scoreBoard li {
      padding: 8px 15px;
      margin: 5px 0;
      background-color: #f9f9f9;
      border-radius: 5px;
      transition: all 0.3s;
    }
    #scoreBoard li:hover {
      background-color: #f0f0f0;
      transform: translateX(5px);
    }
    hr {
      border: 0;
      height: 1px;
      background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
      margin: 20px 0;
    }
    #buttons {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }
    .special-buttons {
      margin-top: 20px;
    }
    #winScreen {
      display: none;
      text-align: center;
    }
    #winScreen h2 {
      color: #e74c3c;
      font-size: 2em;
      border: none;
    }
    #finalRankings {
      list-style-type: none;
      padding: 0;
      margin: 20px 0;
    }
    #finalRankings li {
      padding: 10px;
      margin: 5px 0;
      background-color: #f9f9f9;
      border-radius: 5px;
    }
    #finalRankings li:first-child {
      background-color: #ffd700;
      font-weight: bold;
      font-size: 1.2em;
    }
    #finalRankings li:nth-child(2) {
      background-color: #c0c0c0;
    }
    #finalRankings li:nth-child(3) {
      background-color: #cd7f32;
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #f00;
      top: -10px;
      z-index: 0;
    }
  </style>
</head>
<body>
  <h1>Pass the Pigs</h1>
  <div id="setup">
    <h2>Game Setup</h2>
    <label>How many players? <input type="number" id="numPlayers" min="2" max="10"></label>
    <button class="button" onclick="setupGame()">Start</button>
    <div id="playerInputs"></div>
  </div>

  <div id="game" style="display:none;">
    <h2 id="turnDisplay"></h2>
    <p id="roundScore">Round Score: 0</p>
    <div id="buttons"></div>
    <div class="special-buttons">
      <button class="button special" onclick="pigOut()">Pig Out</button>
      <button class="button special" onclick="makinBacon()">Makin' Bacon</button>
      <button class="button special" onclick="eliminatePlayer()">Piggyback (ELIMINATE)</button>
      <button class="button special" onclick="bankPoints()">Bank Points</button>
    </div>
    <hr>
    <h3>Scores</h3>
    <ul id="scoreBoard"></ul>
  </div>

  <div id="winScreen">
    <h2 id="winnerText"></h2>
    <h3>Final Rankings</h3>
    <ul id="finalRankings"></ul>
    <button class="button" onclick="resetGame()">Play Again</button>
  </div>

  <script>
    let players = [];
    let scores = {};
    let currentIndex = 0;
    let roundScore = 0;
    let eliminatedPlayers = [];

    const outcomes = [
      { name: "Sider (1 pt)", points: 1 },
      { name: "Trotter (5 pts)", points: 5 },
      { name: "Razorback (5 pts)", points: 5 },
      { name: "Snouter (10 pts)", points: 10 },
      { name: "Leaning Jowler (15 pts)", points: 15 },
      { name: "Double Trotter (20 pts)", points: 20 },
      { name: "Double Razorback (20 pts)", points: 20 },
      { name: "Double Snouter (40 pts)", points: 40 },
      { name: "Double Leaning Jowler (60 pts)", points: 60 }
    ];

    function setupGame() {
      const num = parseInt(document.getElementById('numPlayers').value);
      if (!num || num < 2) return alert("Enter 2 or more players.");

      const container = document.getElementById("playerInputs");
      container.innerHTML = "";
      players = [];
      for (let i = 0; i < num; i++) {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = `Player ${i + 1} name`;
        input.id = `player${i}`;
        container.appendChild(input);
        container.appendChild(document.createElement("br"));
      }

      const button = document.createElement("button");
      button.className = "button";
      button.innerText = "Begin Game";
      button.onclick = beginGame;
      container.appendChild(button);
    }

    function beginGame() {
      players = [];
      scores = {};
      eliminatedPlayers = [];
      for (let i = 0; i < 10; i++) {
        const input = document.getElementById(`player${i}`);
        if (input && input.value.trim()) {
          players.push(input.value.trim());
          scores[input.value.trim()] = 0;
        }
      }
      if (players.length < 2) return alert("Enter at least two player names.");

      document.getElementById("setup").style.display = "none";
      document.getElementById("game").style.display = "block";
      document.getElementById("winScreen").style.display = "none";
      currentIndex = 0;
      roundScore = 0;
      renderGame();
    }

    function renderGame() {
      const current = players[currentIndex];
      document.getElementById("turnDisplay").innerText = `${current}'s Turn`;
      document.getElementById("roundScore").innerText = `Round Score: ${roundScore}`;

      const buttons = document.getElementById("buttons");
      buttons.innerHTML = "";
      outcomes.forEach(outcome => {
        const btn = document.createElement("button");
        btn.className = "button";
        btn.innerText = outcome.name;
        btn.onclick = () => {
          roundScore += outcome.points;
          renderGame();
        };
        buttons.appendChild(btn);
      });

      const board = document.getElementById("scoreBoard");
      board.innerHTML = "";
      players.forEach(p => {
        const li = document.createElement("li");
        li.innerText = `${p}: ${scores[p]} pts`;
        if (eliminatedPlayers.includes(p)) {
          li.className = "eliminated";
        }
        board.appendChild(li);
      });
    }

    function eliminatePlayer() {
      const current = players[currentIndex];
      eliminatedPlayers.push(current);
      alert(`${current} has been eliminated by Piggyback!`);
      
      // Check if game is over
      if (players.length - eliminatedPlayers.length === 1) {
        const winner = players.find(p => !eliminatedPlayers.includes(p));
        showWinScreen(winner, true);
        return;
      }
      
      nextPlayer();
    }

    function pigOut() {
      alert("Pig Out! Round score lost.");
      nextPlayer();
    }

    function makinBacon() {
      const current = players[currentIndex];
      scores[current] = 0;
      alert(`${current}'s score reset to 0!`);
      nextPlayer();
    }

    function bankPoints() {
      const current = players[currentIndex];
      scores[current] += roundScore;
      if (scores[current] >= 100) {
        showWinScreen(current, false);
        return;
      }
      alert(`${roundScore} points banked.`);
      nextPlayer();
    }

    function nextPlayer() {
      roundScore = 0;
      do {
        currentIndex = (currentIndex + 1) % players.length;
      } while (eliminatedPlayers.includes(players[currentIndex]));
      renderGame();
    }

    function showWinScreen(winner, isEliminationWin) {
      document.getElementById("game").style.display = "none";
      const winScreen = document.getElementById("winScreen");
      const winnerText = document.getElementById("winnerText");
      
      if (isEliminationWin) {
        winnerText.innerText = `${winner} wins as the last remaining player!`;
      } else {
        winnerText.innerText = `${winner} wins with ${scores[winner]} points!`;
      }
      
      // Create final rankings
      const rankings = document.getElementById("finalRankings");
      rankings.innerHTML = "";
      
      // Sort players by score (highest first)
      const sortedPlayers = [...players].sort((a, b) => scores[b] - scores[a]);
      
      sortedPlayers.forEach((player, index) => {
        const li = document.createElement("li");
        li.innerText = `${index + 1}. ${player}: ${scores[player]} pts`;
        if (eliminatedPlayers.includes(player)) {
          li.innerText += " (eliminated)";
        }
        rankings.appendChild(li);
      });
      
      winScreen.style.display = "block";
      startConfetti();
    }

    function resetGame() {
      stopConfetti();
      document.getElementById("winScreen").style.display = "none";
      document.getElementById("setup").style.display = "block";
    }

    // Confetti animation functions
    let confettiInterval;
    function startConfetti() {
      const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff'];
      confettiInterval = setInterval(() => {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        document.body.appendChild(confetti);
        
        // Animation
        let pos = -10;
        let speed = 2 + Math.random() * 3;
        let spin = Math.random() * 10 - 5;
        let angle = 0;
        
        const fall = setInterval(() => {
          pos += speed;
          angle += spin;
          confetti.style.top = pos + "px";
          confetti.style.transform = `rotate(${angle}deg)`;
          
          if (pos > window.innerHeight) {
            clearInterval(fall);
            confetti.remove();
          }
        }, 20);
      }, 100);
    }

    function stopConfetti() {
      clearInterval(confettiInterval);
      document.querySelectorAll('.confetti').forEach(el => el.remove());
    }
  </script>
</body>
</html>
